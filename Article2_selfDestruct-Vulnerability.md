# selfdestruct Function Vulnerability

## what is selfdestruct Function?
In Solidity, the selfdestruct function is used to destroy the contract and tranfer the remaining contract balance to a specified address. The function should be called with caution because it will permanently erase the contract and all of its state and functionality.

## The vulnerability
### An unprotected selfdestruct function
If the selfdestruct function is not protected, anyone will be able to call it and destroy the contract and the sender will be able to empty the contract balance.

Here is an example of an unprotected selfdestruct function in Solidity:

```
    function destroyContract() public {
        selfdestruct(msg.sender);
    }
```
This function allows anyone to call destroyContract which calls the selfdestruct function and destroy the contract. The Contract will be destroy permanently and the process cannot be undone.

## Ways to avoid selfdestruct vulnerability
1. The function can be protected with a modifier that checks if the caller is the deployer or the intended address that is meant to destroy the contract.

2. The function can be protected with an if statement that checks checks the caller's address to prevent unauthorised address from being able to destroy the contract.

3. The function can be protected using openzepplein access control contract. Whereby the selfdestruct function will only be called by the address that has the role to call the function.

## An example of a protected selfdestruct function using a modifier

```
    pragma solidity ^0.8.0;

    contract TestContract {
        address Admin;

        constructor() public {
            Admin = msg.sender;
        }

        modifier onlyOwner() {
            require(msg.sender == Admin, "Unauthorized access, only Admin.");
            _;
        }

        function destroyContract() public onlyOwner {
            selfdestruct(owner);
        }
    }
```

Only the contract Admin/owner has the access to call the destroyContract function, as indicated by the onlyOwner modifier. Any other users won't be able to call the function.
